(function(b){function h(){var a=Date.now();p((a-g)/1E3);var b="images/water-block.png images/stone-block.png images/stone-block.png images/stone-block.png images/grass-block.png images/grass-block.png".split(" "),d,e;f.fillStyle="white";f.fillRect(0,0,c.width,c.height);for(d=0;6>d;d++)for(e=0;5>e;e++)f.drawImage(Resources.get(b[d]),101*e,83*d);q();r();t();g=a;0==k&&(k=a+1E3*Math.floor(10*Math.random()+10));u.requestAnimationFrame(h)}function l(){m();g=Date.now();h()}function p(a){allEnemies.forEach(function(b){b.update(a)})}
function r(){player.isGameOver||allEnemies.forEach(function(a){a.touchesPlayer(player)&&player.hit()})}function t(){0==player.row&&(player.scored(200),globalSpeedMultiplyer+=1,allEnemies.push(new Enemy));player.isGameOver&&allEnemies.forEach(function(a){a.freeze()})}function q(){allEnemies.forEach(function(a){a.render()});player.render()}function m(){allEnemies=[new Enemy,new Enemy,new Enemy];player.reset()}var n=b.document,u=b.window,c=n.createElement("canvas"),f=c.getContext("2d"),g;c.width=505;
c.height=606;n.body.appendChild(c);var k=!1;document.addEventListener("keydown",function(a){"restart"=={27:"restart"}[a.keyCode]&&player.isGameOver&&Engine.reset()});Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]);Resources.onReady(l);b.ctx=f;b.Engine={init:l,reset:m}})(this);