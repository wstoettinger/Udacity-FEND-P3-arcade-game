(function(b){function h(){var a=Date.now();n((a-g)/1E3);var b="images/water-block.png images/stone-block.png images/stone-block.png images/stone-block.png images/grass-block.png images/grass-block.png".split(" "),d,e;f.fillStyle="white";f.fillRect(0,0,c.width,c.height);for(d=0;6>d;d++)for(e=0;5>e;e++)f.drawImage(Resources.get(b[d]),101*e,83*d);p();q();r();g=a;t.requestAnimationFrame(h)}function k(){l();g=Date.now();h()}function n(a){gem.update(a);allEnemies.forEach(function(b){b.update(a)})}function q(){player.isGameOver||
(allEnemies.forEach(function(a){a.touchesPlayer(player)&&player.hit()}),gem.touchesPlayer(player)&&gem.hitPlayer(player))}function r(){0==player.row&&(player.reachedGoal(),globalSpeedMultiplyer+=1,allEnemies.push(new Enemy));player.isGameOver&&(allEnemies.forEach(function(a){a.freeze()}),gem.stop())}function p(){gem.render();allEnemies.forEach(function(a){a.render()});player.render()}function l(){gem.reset();allEnemies=[new Enemy,new Enemy,new Enemy];player.reset()}var m=b.document,t=b.window,c=m.createElement("canvas"),
f=c.getContext("2d"),g;c.width=505;c.height=606;m.body.appendChild(c);document.addEventListener("keydown",function(a){"restart"=={27:"restart"}[a.keyCode]&&player.isGameOver&&Engine.reset()});Resources.load("images/stone-block.png images/water-block.png images/grass-block.png images/enemy-bug.png images/char-boy.png images/gem-blue.png".split(" "));Resources.onReady(k);b.ctx=f;b.Engine={init:k,reset:l}})(this);